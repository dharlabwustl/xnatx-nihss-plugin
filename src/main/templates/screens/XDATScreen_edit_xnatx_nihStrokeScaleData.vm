#* @vtlvariable name="item" type="org.nrg.xft.XFTItem" *#
#* @vtlvariable name="turbineUtils" type="org.nrg.xdat.turbine.utils.TurbineUtils" *#
#* @vtlvariable name="link" type="org.apache.turbine.services.pull.tools.TemplateLink" *#
#* @vtlvariable name="om" type="org.nrg.xdat.om.XnatxNihstrokescaledata" *#
#* @vtlvariable name="project" type="java.lang.String" *#
#* @vtlvariable name="content" type="org.apache.turbine.services.pull.tools.ContentTool" *#
#* @vtlvariable name="page" type="org.apache.turbine.util.template.HtmlPageAttributes" *#
#* @vtlvariable name="ui" type="org.apache.turbine.services.pull.util.UIManager" *#
#* @vtlvariable name="data" type="org.apache.turbine.services.rundata.DefaultTurbineRunData" *#
#macro (tip_icon $text)
    <div class='tip_icon'>$text</div>
#end
<!-- BEGIN /screens/XDATScreen_edit_xnatx_nihStrokeScaleData.vm -->
<script type="text/javascript" language="JavaScript" src="$content.getURI('scripts/yui/build/calendar/calendar-min.js')"></script>
<link type="text/css" rel="stylesheet" href="$content.getURI('scripts/yui/build/calendar/assets/skins/sam/calendar.css')">

$page.setTitle("XDAT")
$page.setLinkColor($ui.alink)
$page.setVlinkColor($ui.vlink)
#set($pValues = [-1, 0, 1, 2, 3, 4, 5])
#set($pText = ["NA", 0, 1, 2, 3, 4, 5])

<style type="text/css">
th {
    text-align: left;
    vertical-align: top;
}

th.subhead {
    padding-left: 30px;
    padding-top: 10px;
}

</style>
<script type="text/javascript">
    var elementName = "$!item.getXSIType()";
    window.currentID = "$!om.getId()";
    #if($om.getProject())
        #if($om.getProject().equals(""))
            window.currentProject = "$!project";
        #else
            window.currentProject = "$!om.getProject()";
        #end
    #else
        window.currentProject = "$!project";
    #end

    window.currentSubject = "$!om.getSubjectId()";
    window.currentLabel = "$!om.getLabel()";
</script>

#if ($data.message)
    <span style="color: red; font-size: small; ">$data.message</span>
#end

<div class="add_experiment_form">
    <form ID="form1" name="form1" method="post" action="$link.setAction("ModifySubjectAssessorData")">
    <input type="hidden" name="project" value="$!{project}"/>
    #if($vr)
        <span style="color: red; ">Invalid parameters:<br>$vr.toHTML()</span>
        <hr>
    #end

    <table width="100%">
    <tr>
        <td>
            <table width="100%">
                <tr>
                    <td align="left" valign="middle">
                        <div class="edit_title">NIH Stroke Scale Details</div>
                    </td>
                </tr>
           </table>
        </td>
    </tr>
    <tr>
        <td>
            <table width="100%">
            <tr>
            <td valign="top" colspan=2>
            <table>
            <tr>
                <td colspan='2'>
                    <input type="hidden" name="$om.getXSIType()/ID" id="$om.getXSIType()/ID" value="$!om.getId()"/>
                    #if($om.getId())
                        #parse($turbineUtils.getTemplateName("psl.vm",$om.getXSIType(),$project,"edit"))
                    #else
                        #parse($turbineUtils.getTemplateName("_projSubj.vm",$om.getXSIType(),$project,"upload"))
                    #end
                </td>
            </tr>
            <tr>
                <td colspan="2">#parse("/screens/EditProjectSpecificFields.vm")</td>
            </tr>
            <tr>
                <th>Date</th>
                <td width=94%>#xdatCalendar("xnatx:nihStrokeScaleData/date" $item $vr)</td>
            </tr>
            <tr>
                <th>Visit ID</th>
                <td>#xdatTextBox("xnatx:nihStrokeScaleData/visit_id" $item "" $vr)</td>
            </tr>
            <tr>
                <td colspan="2"><hr/></td>
            </tr>
            <tr>
            <td colspan='2'>
            <table id="nih_stroke_scale" CELLSPACING=0>
            <tr>
                <th><span class="tip_text">1a. Level of Consciousness:<span class="tip shadowed">The investigator must choose a response if a full evaluation is prevented by such obstacles as an endotracheal tube, language barrier, orotracheal trauma/bandages. A 3 is scored only if the patient makes no movement (other than reflexive posturing) in response to noxious stimulation.</span></span></th>
                <td valign="top">
                    <SELECT ID="xnatx:nihStrokeScaleData/Q1a" name="xnatx:nihStrokeScaleData/Q1a" onChange="updateScore();">
                        <OPTION VALUE="">(SELECT)</OPTION>
                        #foreach ($index in [0..4])
                            <OPTION VALUE="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q1a")))
                                    SELECTED #end>$pText.get($index)</OPTION>
                        #end
                    </SELECT>
                    <div class="tip_icon">
                        <table class="tip shadowed" CELLSPACING=0>
                            <tr><td valign="top">NA=</td><td width="300" valign="top"><b>No answer</b></td></tr>
                            <tr><td valign="top">0=</td><td width="300" valign="top"><b>Alert;</b> keenly responsive.</td></tr>
                            <tr><td valign="top">1=</td><td width="300" valign="top"><b>Not alert;</b> but arousable by minor stimulation to obey, answer, or respond.</td></tr>
                            <tr><td valign="top">2=</td><td width="300" valign="top"><b>Not alert;</b> requires repeated stimulation to attend, or is obtunded and requires strong or painful stimulation to make movements (not stereotyped).</td></tr>
                            <tr><td valign="top">3=</td><td width="300" valign="top">Responds only with reflex motor or autonomic effects or totally unresponsive, flaccid, and areflexic.</td></tr>
                        </table>
                    </div>
                </td>
            </tr>

            <tr>
                <th><span class="tip_text">1b. LOC Questions:<span class="tip shadowed">The patient is asked the month and his/her age. The answer must be correct - there is no partial credit for being close. Aphasic and stuporous patients who do not comprehend the questions will score 2. Patients unable to speak because of endotracheal intubation, orotracheal trauma, severe dysarthria from any cause, language barrier, or any other problem not secondary to aphasia are given a 1. It is important that only the initial answer be graded and that the examiner not 'help' the patient with verbal or non-verbal cues.</span></th>
                <td valign="top">
                    <SELECT ID="xnatx:nihStrokeScaleData/Q1b" name="xnatx:nihStrokeScaleData/Q1b" onChange="updateScore();">
                        <OPTION VALUE="">(SELECT)</OPTION>
                        #foreach ($index in [0..3])
                            <OPTION VALUE="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q1b")))
                                    SELECTED #end>$pText.get($index)</OPTION>
                        #end
                    </SELECT>
                    <div class="tip_icon">
                        <table class="tip shadowed" CELLSPACING=0>
                            <tr>
                                <td valign="top">NA=</td>
                                <td width="300" valign="top">
                                    <b>No answer</b>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">0=</td>
                                <td width="300" valign="top">
                                    <b>Answers</b> both questions correctly.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">1=</td>
                                <td width="300" valign="top">
                                    <b>Answers</b> one question correctly.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">2=</td>
                                <td width="300" valign="top">
                                    <b>Answers</b> neither question correctly.
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>

            <tr>
                <th><span class="tip_text">1c. LOC Commands<span class="tip shadowed">The patient is asked to open and close the eyes and then to grip and release the non-paretic hand. Substitute another one step command if the hands cannot be used. Credit is given if an unequivocal attempt is made but not completed due to weakness. If the patient does not respond to command, the task should be demonstrated to him or her (pantomime), and the result scored (i.e., follows none, one or two commands). Patients with trauma, amputation, or other physical impediments should be given suitable one-step commands. Only the first attempt is scored.</span></span></th>
                <td valign="top">
                    <select id="xnatx:nihStrokeScaleData/Q1c" name="xnatx:nihStrokeScaleData/Q1c" onChange="updateScore();">
                        <option value="">(SELECT)</option>
                        #foreach ($index in [0..3])
                            <option value="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q1c"))) selected #end>$pText.get($index)</option>
                        #end
                    </select>
                    <div class="tip_icon">
                        <table class="tip shadowed" CELLSPACING=0>
                            <tr>
                                <td valign="top">NA=</td>
                                <td width="300" valign="top">
                                    <b>No answer</b>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">0=</td>
                                <td width="300" valign="top">
                                    <B>Performs</B> both tasks correctly.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">1=</td>
                                <td width="300" valign="top">
                                    <B>Performs</B> one task correctly.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">2=</td>
                                <td width="300" valign="top">
                                    <B>Performs</b> neither task correctly.
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>

            <tr>
                <th><span class="tip_text">2. Best Gaze<span class="tip shadowed">Only horizontal eye movements will be tested. Voluntary or reflexive (oculocephalic) eye movements will be scored, but caloric testing is not done. If the patient has a conjugate deviation of the eyes that can be overcome by voluntary or reflexive activity, the score will be 1. If a patient has an isolated peripheral nerve paresis (CN III, IV or VI), score a 1. Gaze is testable in all aphasic patients. Patients with ocular trauma, bandages, pre-existing blindness, or other disorder of visual acuity or fields should be tested with reflexive movements, and a choice made by the investigator. Establishing eye contact and then moving about the patient from side to side will occasionally clarify the presence of a partial gaze palsy.</span></span></th>
                <td valign="top">
                    <select id="xnatx:nihStrokeScaleData/Q2" name="xnatx:nihStrokeScaleData/Q2" onChange="updateScore();">
                        <option value="">(SELECT)</option>
                        #foreach ($index in [0..3])
                            <option value="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q2"))) selected #end>$pText.get($index)</option>
                        #end
                    </select>
                    <div class="tip_icon">
                        <table class="tip shadowed" cellspacing=0>
                            <tr>
                                <td valign="top">NA=</td>
                                <td width="300" valign="top">
                                    <b>No answer</b>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">0=</td>
                                <td width="300" valign="top">
                                    <B>Normal.</B>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">1=</td>
                                <td width="300" valign="top">
                                    <B>Partial gaze palsy;</B> gaze is abnormal in one or both eyes, but forced deviation or total gaze
                                    paresis is not present.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">2=</td>
                                <td width="300" valign="top">
                                    <B>Forced deviation,</B> or total gaze paresis not overcome by the oculocephalic maneuver.
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>

            <tr>
                <th><span class="tip_text">3. Visual<span class="tip shadowed">Visual fields (upper and lower quadrants) are tested by confrontation, using finger counting or visual threat, as appropriate. Patients may be encouraged, but if they look at the side of the moving fingers appropriately, this can be scored as normal. If there is unilateral blindness or enucleation, visual fields in the remaining eye are scored. Score 1 only if a clear-cut asymmetry, including quadrantanopia, is found. If patient is blind from any cause, score 3. Double simultaneous stimulation is performed at this point. If there is extinction, patient receives a 1, and the results are used to respond to item 11.</span></span></th>
                <td valign="top">
                    <SELECT ID="xnatx:nihStrokeScaleData/Q3" name="xnatx:nihStrokeScaleData/Q3" onChange="updateScore();">
                        <OPTION VALUE="">(SELECT)</OPTION>
                        #foreach ($index in [0..4])
                            <OPTION VALUE="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q3")))
                                    SELECTED #end>$pText.get($index)</OPTION>
                        #end
                    </SELECT>
                    <div class="tip_icon">
                        <table class="tip shadowed" CELLSPACING=0>
                            <tr>
                                <td valign="top">NA=</td>
                                <td width="300" valign="top">
                                    <b>No answer</b>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">0=</td>
                                <td width="300" valign="top">
                                    <B>No visual loss.</B>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">1=</td>
                                <td width="300" valign="top">
                                    <B>Partial hemianopia.</B>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">2=</td>
                                <td width="300" valign="top">
                                    <B>Complete hemianopia.</B>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">3=</td>
                                <td width="300" valign="top">
                                    <B>Bilateral hemianopia</B> (blind including cortical blindness).
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>

            <tr>
                <th><span class="tip_text">4. Facial Palsy<span class="tip shadowed">Ask&mdash;or use pantomime to encourage&mdash;the patient to show teeth or raise eyebrows and close eyes. Score symmetry of grimace in response to noxious stimuli in the poorly responsive or non-comprehending patient. If facial trauma/bandages, orotracheal tube, tape or other physical barriers obscure the face, these should be removed to the extent possible.</span></span></th>
                <td valign="top">
                    <SELECT ID="xnatx:nihStrokeScaleData/Q4" name="xnatx:nihStrokeScaleData/Q4" onChange="updateScore();">
                        <OPTION VALUE="">(SELECT)</OPTION>
                        #foreach ($index in [0..4])
                            <OPTION VALUE="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q4")))
                                    SELECTED #end>$pText.get($index)</OPTION>
                        #end
                    </SELECT>
                    <div class="tip_icon">
                        <table class="tip shadowed" CELLSPACING=0>
                            <tr>
                                <td valign="top">NA=</td>
                                <td width="300" valign="top">
                                    <b>No answer</b>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">0=</td>
                                <td width="300" valign="top">
                                    <B>Normal</B> symmetrical movements.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">1=</td>
                                <td width="300" valign="top">
                                    <B>Minor paralysis</B> (flattened nasolabial fold, asymmetry on smiling).
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">2=</td>
                                <td width="300" valign="top">
                                    <B>Partial paralysis</B> (total or near-total paralysis of lower face).
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">3=</td>
                                <td width="300" valign="top">
                                    <strong>Complete paralysis</strong> of one or both sides (absence of facial movement in the
                                    upper and lower face).
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>
            <tr>
                <th><span class="tip_text">5. Motor Arm<span class="tip shadowed">The limb is placed in the appropriate position: extend the arms (palms down) 90 degrees (if sitting) or 45 degrees (if supine). Drift is scored if the arm falls before 10 seconds. The aphasic patient is encouraged using urgency in the voice and pantomime, but not noxious stimulation. Each limb is tested in turn, beginning with the non-paretic arm. Only in the case of amputation or joint fusion at the shoulder, the examiner should record the score as untestable (UN), and clearly write the explanation for this choice.</span></span></th>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <th class="subhead">Left Arm:</th>
                <td valign="top">
                    <SELECT ID="xnatx:nihStrokeScaleData/Q5a" name="xnatx:nihStrokeScaleData/Q5a" onChange="updateScore();">
                        <OPTION VALUE="">(SELECT)</OPTION>
                        #foreach ($index in [0..6])
                            <OPTION VALUE="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q5a"))) SELECTED #end>$pText.get($index)</OPTION>
                        #end
                    </SELECT>
                    <div class="tip_icon">
                        <table class="tip shadowed" CELLSPACING=0>
                            <tr>
                                <td valign="top">NA=</td>
                                <td width="300" valign="top">
                                    <b>No answer</b>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">0=</td>
                                <td width="300" valign="top">
                                    <B>No drift;</B> limb holds 90 (or 45) degrees for full 10 seconds.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">1=</td>
                                <td width="300" valign="top">
                                    <B>Drift;</B> limb holds 90 (or 45) degrees, but drifts down before full 10 seconds; does not hit
                                    bed or other support.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">2=</td>
                                <td width="300" valign="top">
                                    <B>Some effort against gravity;</B> limb cannot get to or maintain (if cued) 90 (or 45) degrees,
                                    drifts down to bed, but has some effort against gravity.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">3=</td>
                                <td width="300" valign="top">
                                    <B>No effort against gravity;</B> limb falls.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">4=</td>
                                <td width="300" valign="top">
                                    <B>No movement.</B>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">5=</td>
                                <td width="300" valign="top">
                                    <B>Amputation</B> or joint fusion, explain:
                                </td>
                            </tr>
                        </table>
                    </div><BR>
                    #xdatTextArea("xnatx:nihStrokeScaleData/Q5aNote" $item "" $vr 3 15)<BR><BR>
                </td>
            </tr>
            <tr>
                <th class="subhead">Right Arm:</th>
                <td>
                    <SELECT ID="xnatx:nihStrokeScaleData/Q5b" name="xnatx:nihStrokeScaleData/Q5b" onChange="updateScore();">
                        <OPTION VALUE="">(SELECT)</OPTION>
                        #foreach ($index in [0..6])
                            <OPTION VALUE="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q5b")))
                                    SELECTED #end>$pText.get($index)</OPTION>
                        #end
                    </SELECT>
                    <div class="tip_icon">
                        <table class="tip shadowed" CELLSPACING=0>
                            <tr>
                                <td valign="top">NA=</td>
                                <td width="300" valign="top">
                                    <b>No answer</b>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">0=</td>
                                <td width="300" valign="top">
                                    <B>No drift;</B> limb holds 90 (or 45) degrees for full 10 seconds.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">1=</td>
                                <td width="300" valign="top">
                                    <B>Drift;</B> limb holds 90 (or 45) degrees, but drifts down before full 10 seconds; does not hit
                                    bed or other support.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">2=</td>
                                <td width="300" valign="top">
                                    <B>Some effort against gravity;</B> limb cannot get to or maintain (if cued) 90 (or 45) degrees,
                                    drifts down to bed, but has some effort against gravity.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">3=</td>
                                <td width="300" valign="top">
                                    <B>No effort against gravity;</B> limb falls.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">4=</td>
                                <td width="300" valign="top">
                                    <B>No movement.</B>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">5=</td>
                                <td width="300" valign="top">
                                    <B>Amputation</B> or joint fusion, explain:
                                </td>
                            </tr>
                        </table>
                    </div><BR>
                    #xdatTextArea("xnatx:nihStrokeScaleData/Q5bNote" $item "" $vr 3 15)
                </td>
            </tr>

            <tr>
                <th><span class="tip_text">6. Motor Leg<span class="tip shadowed">The limb is placed in the appropriate position: hold the leg at 30 degrees (always tested supine). Drift is scored if the leg falls before 5 seconds. The aphasic patient is encouraged using urgency in the voice and pantomime, but not noxious stimulation. Each limb is tested in turn, beginning with the non-paretic leg. Only in the case of amputation or joint fusion at the hip, the examiner should record the score as untestable (UN), and clearly write the explanation for this choice.</span></span></th>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <th class="subhead">Left Leg</th>
                <td>
                    <SELECT ID="xnatx:nihStrokeScaleData/Q6a" name="xnatx:nihStrokeScaleData/Q6a" onChange="updateScore();">
                        <OPTION VALUE="">(SELECT)</OPTION>
                        #foreach ($index in [0..6])
                            <OPTION VALUE="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q6a")))
                                    SELECTED #end>$pText.get($index)</OPTION>
                        #end
                    </SELECT>
                    <div class="tip_icon">
                        <table class="tip shadowed" CELLSPACING=0>
                            <tr>
                                <td valign="top">NA=</td>
                                <td width="300" valign="top">
                                    <b>No answer</b>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">0=</td>
                                <td width="300" valign="top">
                                    <B>No drift;</B> leg holds 30-degree position for full 5 seconds.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">1=</td>
                                <td width="300" valign="top">
                                    <B>Drift;</B> leg falls by the end of the 5-second period but does not hit bed.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">2=</td>
                                <td width="300" valign="top">
                                    <B>Some effort against gravity;</B> leg falls to bed by 5 seconds, but has some effort against
                                    gravity.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">3=</td>
                                <td width="300" valign="top">
                                    <B>No effort against gravity;</B> leg falls to bed immediately.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">4=</td>
                                <td width="300" valign="top">
                                    <B>No movement.</B>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">5=</td>
                                <td width="300" valign="top">
                                    <B>Amputation</B> or joint fusion, explain:
                                </td>
                            </tr>
                        </table>
                    </div><br>
                    #xdatTextArea("xnatx:nihStrokeScaleData/Q6aNote" $item "" $vr 3 15)<BR><BR>
                </td>
            </tr>
            <tr>
                <th class="subhead">Right Leg</th>
                <td>
                    <SELECT ID="xnatx:nihStrokeScaleData/Q6b" name="xnatx:nihStrokeScaleData/Q6b" onChange="updateScore();">
                        <OPTION VALUE="">(SELECT)</OPTION>
                        #foreach ($index in [0..6])
                            <OPTION VALUE="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q6b")))
                                    SELECTED #end>$pText.get($index)</OPTION>
                        #end
                    </SELECT>
                    <div class="tip_icon">
                        <table class="tip shadowed" CELLSPACING=0>
                            <tr>
                                <td valign="top">NA=</td>
                                <td width="300" valign="top">
                                    <b>No answer</b>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">0=</td>
                                <td width="300" valign="top">
                                    <B>No drift;</B> leg holds 30-degree position for full 5 seconds.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">1=</td>
                                <td width="300" valign="top">
                                    <B>Drift;</B> leg falls by the end of the 5-second period but does not hit bed.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">2=</td>
                                <td width="300" valign="top">
                                    <B>Some effort against gravity;</B> leg falls to bed by 5 seconds, but has some effort against
                                    gravity.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">3=</td>
                                <td width="300" valign="top">
                                    <B>No effort against gravity;</B> leg falls to bed immediately.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">4=</td>
                                <td width="300" valign="top">
                                    <B>No movement.</B>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">5=</td>
                                <td width="300" valign="top">
                                    <B>Amputation</B> or joint fusion, explain:
                                </td>
                            </tr>
                        </table>
                    </div><br>
                    #xdatTextArea("xnatx:nihStrokeScaleData/Q6bNote" $item "" $vr 3 15)
                </td>
            </tr>

            <tr>
                <th><span class="tip_text">7. Limb Ataxia<span class="tip shadowed">This item is aimed at finding evidence of a unilateral cerebellar lesion. Test with eyes open. In case of visual defect, ensure testing is done in intact visual field. The finger-nose-finger and heel-shin tests are performed on both sides, and ataxia is scored only if present out of proportion to weakness.  Ataxia is absent in the patient who cannot understand or is paralyzed. Only in the case of amputation or joint fusion, the examiner should record the score as untestable (UN), and clearly write the explanation for this choice. In case of blindness, test by having the patient touch nose from extended arm position.</span></span></th>
                <td valign="top">
                    <SELECT ID="xnatx:nihStrokeScaleData/Q7" name="xnatx:nihStrokeScaleData/Q7" onChange="updateScore();">
                        <OPTION VALUE="">(SELECT)</OPTION>
                        #foreach ($index in [0..4])
                            <OPTION VALUE="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q7")))
                                    SELECTED #end>$pText.get($index)</OPTION>
                        #end
                    </SELECT>
                    <div class="tip_icon">
                        <table class="tip shadowed" CELLSPACING=0>
                            <tr>
                                <td valign="top">NA=</td>
                                <td width="300" valign="top">
                                    <b>No answer</b>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">0=</td>
                                <td width="300" valign="top">
                                    <B>Absent.</B>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">1=</td>
                                <td width="300" valign="top">
                                    <B>Present in one limb.</B>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">2=</td>
                                <td width="300" valign="top">
                                    <B>Present in two limbs.</B>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">3=</td>
                                <td width="300" valign="top">
                                    <B>Amputation</B> or joint fusion, explain:
                                </td>
                            </tr>
                        </table>
                    </div><br>
                    #xdatTextArea("xnatx:nihStrokeScaleData/Q7Note" $item "" $vr 3 15)
                </td>
            </tr>

            <tr>
                <th><span class="tip_text">8. Sensory<span class="tip shadowed">Sensation or grimace to pinprick when tested, or withdrawal from noxious stimulus in the obtunded or aphasic patient. Only sensory loss attributed to stroke is scored as abnormal and the examiner should test as many body areas (arms [not hands], legs, trunk, face) as needed to accurately check for hemisensory loss. A score of 2&mdash;severe or total sensory loss&mdash;should only be given when a severe or total loss of sensation can be clearly demonstrated. Stuporous and aphasic patients will, therefore, probably score 1 or 0.  The patient with brainstem stroke who has bilateral loss of sensation is scored 2. If the patient does not respond and is quadriplegic, score 2. Patients in a coma (item 1a=3) are automatically given a 2 on this item.</span></span></th>
                <td valign="top">
                    <SELECT ID="xnatx:nihStrokeScaleData/Q8" name="xnatx:nihStrokeScaleData/Q8" onChange="updateScore();">
                        <OPTION VALUE="">(SELECT)</OPTION>
                        #foreach ($index in [0..3])
                            <OPTION VALUE="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q8")))
                                    SELECTED #end>$pText.get($index)</OPTION>
                        #end
                    </SELECT>
                    <div class="tip_icon">
                        <table class="tip shadowed" CELLSPACING=0>
                            <tr>
                                <td valign="top">NA=</td>
                                <td width="300" valign="top">
                                    <b>No answer</b>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">0=</td>
                                <td width="300" valign="top">
                                    <B>Normal;</B> no sensory loss.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">1=</td>
                                <td width="300" valign="top">
                                    <B>Mild-to-moderate sensory loss;</B> patient feels pinprick is less sharp or is dull on the
                                    affected side; or there is a loss of superficial pain with pinprick, but patient is aware of being
                                    touched.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">2=</td>
                                <td width="300" valign="top">
                                    <B>Severe to total sensory loss;</B> patient is not aware of being touched in the face, arm, and
                                    leg.
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>

            <tr>
                <th><span class="tip_text">9. Best Language<span class="tip shadowed">A great deal of information about comprehension will be obtained during the preceding sections of the examination. For this scale item, the patient is asked to describe what is happening in the attached picture, to name the items on the attached naming sheet and to read from the attached list of sentences. Comprehension is judged from responses here, as well as to all of the commands in the preceding general neurological exam. If visual loss interferes with the tests, ask the patient to identify objects placed in the hand, repeat, and produce speech. The intubated patient should be asked to write. The patient in a coma (item 1a=3) will automatically score 3 on this item. The examiner must choose a score for the patient with stupor or limited cooperation, but a score of 3 should be used only if the patient is mute and follows no one-step commands.</span></span></th>
                <td valign="top">
                    <SELECT ID="xnatx:nihStrokeScaleData/Q9" name="xnatx:nihStrokeScaleData/Q9" onChange="updateScore();">
                        <OPTION VALUE="">(SELECT)</OPTION>
                        #foreach ($index in [0..4])
                            <OPTION VALUE="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q9")))
                                    SELECTED #end>$pText.get($index)</OPTION>
                        #end
                    </SELECT>
                    <div class="tip_icon">
                        <table class="tip shadowed" CELLSPACING=0>
                            <tr>
                                <td valign="top">NA=</td>
                                <td width="300" valign="top">
                                    <b>No answer</b>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">0=</td>
                                <td width="300" valign="top">
                                    <B>No aphasia;</B> normal.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">1=</td>
                                <td width="300" valign="top">
                                    <B>Mild-to-moderate aphasia;</B> some obvious loss of fluency or facility of comprehension, without
                                    significant limitation on ideas expressed or form of expression. Reduction of speech and/or
                                    comprehension, however, makes conversation about provided materials difficult or impossible. For
                                    example, in conversation about provided materials, examiner can identify picture or naming card
                                    content from patient’s response.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">2=</td>
                                <td width="300" valign="top">
                                    <B>Severe aphasia;</B> all communication is through fragmentary expression; great need for
                                    inference, questioning, and guessing by the listener. Range of information that can be exchanged is
                                    limited; listener carries burden of communication. Examiner cannot identify materials provided from
                                    patient response.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">3=</td>
                                <td width="300" valign="top">
                                    <B>Mute, global aphasia;</B> no usable speech or auditory comprehension.
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>

            <tr>
                <th><span class="tip_text">10. Dysarthria<span class="tip shadowed">If patient is thought to be normal, an adequate sample of speech must be obtained by asking patient to read or repeat words from the attached list. If the patient has severe aphasia, the clarity of articulation of spontaneous speech can be rated. Only if the patient is intubated or has other physical barriers to producing speech, the examiner should record the score as untestable (UN), and clearly write an explanation for this choice. Do not tell the patient why he or she is being tested.</span></span></th>
                <td valign="top">
                    <SELECT ID="xnatx:nihStrokeScaleData/Q10" name="xnatx:nihStrokeScaleData/Q10" onChange="updateScore();">
                        <OPTION VALUE="">(SELECT)</OPTION>
                        #foreach ($index in [0..4])
                            <OPTION VALUE="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q10")))
                                    SELECTED #end>$pText.get($index)</OPTION>
                        #end
                    </SELECT>
                    <div class="tip_icon">
                        <table class="tip shadowed" CELLSPACING=0>
                            <tr>
                                <td valign="top">NA=</td>
                                <td width="300" valign="top">
                                    <b>No answer</b>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">0=</td>
                                <td width="300" valign="top">
                                    <B>Normal.</B>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">1=</td>
                                <td width="300" valign="top">
                                    <B>Mild-to-moderate dysarthria;</B> patient slurs at least some words and, at worst, can be
                                    understood with some difficulty.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">2=</td>
                                <td width="300" valign="top">
                                    <B>Severe dysarthria;</B> patient's speech is so slurred as to be unintelligible in the absence of
                                    or out of proportion to any dysphasia, or is mute/anarthric.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">3=</td>
                                <td width="300" valign="top">
                                    <B>Intubated</B> or other physical barrier, explain:
                                </td>
                            </tr>
                        </table>
                    </div><BR>
                    #xdatTextArea("xnatx:nihStrokeScaleData/Q10Note" $item "" $vr 3 15)
                </td>
            </tr>

            <tr>
                <th><span class="tip_text">11. Extinction and Inattention<span class="tip shadowed">Formerly 'neglect'. Sufficient information to identify neglect may be obtained during the prior testing. If the patient has a severe visual loss preventing visual double simultaneous stimulation, and the cutaneous stimuli are normal, the score is normal. If the patient has aphasia but does appear to attend to both sides, the score is normal. The presence of visual spatial neglect or anosagnosia may also be taken as evidence of abnormality. Since the abnormality is scored only if present, the item is never untestable.</span></span></th>
                <td valign="top">
                    <SELECT ID="xnatx:nihStrokeScaleData/Q11" name="xnatx:nihStrokeScaleData/Q11" onChange="updateScore();">
                        <OPTION VALUE="">(SELECT)</OPTION>
                        #foreach ($index in [0..3])
                            <OPTION VALUE="$pValues.get($index)" #if($pValues.get($index).equals($item.getProperty("xnatx:nihStrokeScaleData/Q11")))
                                    SELECTED #end>$pText.get($index)</OPTION>
                        #end
                    </SELECT>
                    <div class="tip_icon">
                        <table class="tip shadowed" CELLSPACING=0>
                            <tr>
                                <td valign="top">NA=</td>
                                <td width="300" valign="top">
                                    <b>No answer</b>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">0=</td>
                                <td width="300" valign="top">
                                    <B>No abnormality.</B>
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">1=</td>
                                <td width="300" valign="top">
                                    <B>Visual, tactile, auditory, spatial, or personal inattention</B> or extinction to bilateral
                                    simultaneous stimulation in one of the sensory modalities.
                                </td>
                            </tr>
                            <tr>
                                <td valign="top">2=</td>
                                <td width="300" valign="top">
                                    <B>Profound hemi-inattention or extinction to more than one modality;</B> does not recognize own
                                    hand or orients to only one side of space.
                                </td>
                            <tr>
                        </table>
                    </div>
                </td>
            </tr>
            <tr class="results_summary">
                <th><b>Total:</b></th>
                <td id="totalScore">0</td>
            </tr>
            </table>
            <tr>
                <td valign="top"><b>Notes</b></td>
                <td>#xdatTextArea("xnatx:nihStrokeScaleData/note" $item "" $vr 4 50)</td>
            </tr>
            </table>
            </td>
            </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td>
            #xdatEditProps($item $edit_screen)
    <tr>
        <td COLSPAN=2 ALIGN=left><input type="button" ONCLICK="validateForm();" name="eventSubmit_doInsert" value="Submit"/></td>
    </tr>
    </td>
    </tr>
    </table>
    </form>
</div>

<script type="text/javascript">
    function validateForm() {
        document.getElementById("form1").submit();
        return true;
    }

    updateScore();

    function updateScore() {
        var totalScore = 0;
        var elementName = "$!item.getXSIType()";

        totalScore += parseInt(document.getElementById(elementName + "/Q1a").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q1a").value) : 0;
        totalScore += parseInt(document.getElementById(elementName + "/Q1b").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q1b").value) : 0;
        totalScore += parseInt(document.getElementById(elementName + "/Q1c").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q1c").value) : 0;
        totalScore += parseInt(document.getElementById(elementName + "/Q2").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q2").value) : 0;
        totalScore += parseInt(document.getElementById(elementName + "/Q3").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q3").value) : 0;
        totalScore += parseInt(document.getElementById(elementName + "/Q4").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q4").value) : 0;
        totalScore += parseInt(document.getElementById(elementName + "/Q5a").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q5a").value) : 0;
        totalScore += parseInt(document.getElementById(elementName + "/Q5b").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q5b").value) : 0;
        totalScore += parseInt(document.getElementById(elementName + "/Q6a").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q6a").value) : 0;
        totalScore += parseInt(document.getElementById(elementName + "/Q6b").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q6b").value) : 0;
        totalScore += parseInt(document.getElementById(elementName + "/Q7").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q7").value) : 0;
        totalScore += parseInt(document.getElementById(elementName + "/Q8").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q8").value) : 0;
        totalScore += parseInt(document.getElementById(elementName + "/Q9").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q9").value) : 0;
        totalScore += parseInt(document.getElementById(elementName + "/Q10").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q10").value) : 0;
        totalScore += parseInt(document.getElementById(elementName + "/Q11").value) >= 0 ? parseInt(document.getElementById(elementName + "/Q11").value) : 0;

        document.getElementById("totalScore").innerHTML = totalScore;
    }

</script>
<!-- END /screens/XDATScreen_edit_xnatx_nihStrokeScaleData.vm -->

